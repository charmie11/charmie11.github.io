<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CR直列回路シミュレータ</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.5.2.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.5.2.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="a361f1b1-0ad7-4d23-b53e-898673f3c122" data-root-id="p1062" style="display: contents;"></div>
  
    <script type="application/json" id="ce95a1f9-55dd-47c6-8ffc-1ac6da8f813e">
      {"41d29aa1-8301-4637-8b12-fe655e21446d":{"version":"3.5.2","title":"Bokeh Application","roots":[{"type":"object","name":"Column","id":"p1062","attributes":{"children":[{"type":"object","name":"Row","id":"p1061","attributes":{"children":[{"type":"object","name":"Column","id":"p1059","attributes":{"children":[{"type":"object","name":"Slider","id":"p1001","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p1053","attributes":{"args":{"type":"map","entries":[["source",{"type":"object","name":"ColumnDataSource","id":"p1007","attributes":{"selected":{"type":"object","name":"Selection","id":"p1008","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1009"},"data":{"type":"map","entries":[["x",[0.0,2.6315789473684212,5.2631578947368425,7.894736842105264,10.526315789473685,13.157894736842106,15.789473684210527,18.42105263157895,21.05263157894737,23.68421052631579,26.315789473684212,28.947368421052634,31.578947368421055,34.21052631578948,36.8421052631579,39.473684210526315,42.10526315789474,44.736842105263165,47.36842105263158,50.0]],["y",[0.0,0.3550590335302177,0.5840511497690232,0.7317375465300391,0.8269865539915284,0.8884165409190288,0.9280352560582771,0.9535869884904747,0.9700663475002737,0.9806945612268559,0.6256355276966382,0.3966434114578328,0.24895701469681686,0.15370800723532743,0.09227802030782713,0.05265930516857893,0.02710757273638116,0.01062821372658225,5.204170427930421e-17,0.0]],["V",[1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0]],["R",[2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0,2.0]],["C",[3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0,3.0]]]}}}],["voltage",{"id":"p1001"}],["period",{"type":"object","name":"Slider","id":"p1004","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1053"}]]]},"title":"\u5468\u671f [\u79d2]","start":1.0,"end":40000.0,"value":50.0}}],["resistance",{"type":"object","name":"Slider","id":"p1002","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"type":"object","name":"CustomJS","id":"p1006","attributes":{"args":{"type":"map","entries":[["resistance",{"id":"p1002"}],["capacitance",{"type":"object","name":"Slider","id":"p1003","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1006"},{"id":"p1053"}]]]},"title":"\u9759\u96fb\u5bb9\u91cf [F]","start":1.0,"end":30.0,"value":3.0}}],["period",{"id":"p1004"}]]},"code":"\n    const tau = resistance.value * capacitance.value;\n    period.start = 0.1 * tau\n    period.end = 15.0 * tau\n    period.value = Math.min(Math.max(period.value, period.start), period.end)\n    period.step = 0.1 * tau\n    period.change.emit();\n"}},{"id":"p1053"}]]]},"title":"\u62b5\u6297 [Ohm]","start":1.0,"end":150.0,"value":2.0}}],["capacitance",{"id":"p1003"}],["samples",{"type":"object","name":"Slider","id":"p1005","attributes":{"js_property_callbacks":{"type":"map","entries":[["change:value",[{"id":"p1053"}]]]},"title":"\u30b5\u30f3\u30d7\u30eb\u6570 [\u56de/\u534a\u5468\u671f]","start":10,"end":2000,"value":10,"step":10}}]]},"code":"\n    const V = voltage.value;\n    const T = period.value;\n    const R = resistance.value;\n    const C = capacitance.value;\n    const num_samples = samples.value;\n    \n    const tau = R * C;\n    const times = Array.from(Array(2 * num_samples).keys()).map(i =&gt; i * T / (2 * num_samples));\n    \n    // \u5145\u96fb\u306e\u8a08\u7b97\n    const v_charge = times.slice(0, num_samples).map(t =&gt; V * (1.0 - Math.exp(-t / tau)));\n    const v_charge_clamped = v_charge.map(v =&gt; Math.min(v, V));\n    \n    // \u653e\u96fb\u306e\u8a08\u7b97\n    const v_offset = V - v_charge_clamped[v_charge_clamped.length - 1];\n    const time_offset = times[num_samples - 1];\n    const v_discharge = times.slice(num_samples).map(t =&gt; V * Math.exp(-(t - time_offset) / tau) - v_offset);\n    const v_discharge_clamped = v_discharge.map(v =&gt; Math.max(v, 0));\n    \n    // \u30c7\u30fc\u30bf\u306e\u8a2d\u5b9a\n    const x = times.slice(0, -1);\n    const v_all = v_charge_clamped.concat(v_discharge_clamped);\n    const y = v_all.slice(0, -1);\n\n    // \u66f4\u65b0\u3059\u308b\u30c7\u30fc\u30bf\u306e\u8a2d\u5b9a\n    source.data = {\n        x: x,\n        y: y,\n        V: Array(x.length).fill(V),\n        R: Array(x.length).fill(R),\n        C: Array(x.length).fill(C)\n    };\n    source.change.emit();\n"}}]]]},"title":"\u96fb\u6e90\u96fb\u5727 [V]","start":1.0,"end":20.0,"value":1.0}},{"id":"p1002"},{"id":"p1003"}]}},{"type":"object","name":"Column","id":"p1060","attributes":{"children":[{"id":"p1004"},{"id":"p1005"}]}}]}},{"type":"object","name":"Button","id":"p1054","attributes":{"button_type":"success","js_event_callbacks":{"type":"map","entries":[["button_click",[{"type":"object","name":"CustomJS","id":"p1058","attributes":{"args":{"type":"map","entries":[["source",{"type":"object","name":"ColumnDataSource","id":"p1055","attributes":{"selected":{"type":"object","name":"Selection","id":"p1056","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1057"},"data":{"type":"map","entries":[["\u96fb\u6e90\u96fb\u5727 [V]",[1.0,"","","","","","","","","","","","","","","","","","",""]],["\u62b5\u6297 [\u03a9]",[2.0,"","","","","","","","","","","","","","","","","","",""]],["\u9759\u96fb\u5bb9\u91cf(\u771f\u5024) [F]",[3.0,"","","","","","","","","","","","","","","","","","",""]],["\u6642\u9593 [\u79d2]",[0.0,2.6315789473684212,5.2631578947368425,7.894736842105264,10.526315789473685,13.157894736842106,15.789473684210527,18.42105263157895,21.05263157894737,23.68421052631579,26.315789473684212,28.947368421052634,31.578947368421055,34.21052631578948,36.8421052631579,39.473684210526315,42.10526315789474,44.736842105263165,47.36842105263158,50.0]],["\u30b3\u30f3\u30c7\u30f3\u30b5\u306e\u7aef\u5b50\u96fb\u5727 [V]",[0.0,0.3550590335302177,0.5840511497690232,0.7317375465300391,0.8269865539915284,0.8884165409190288,0.9280352560582771,0.9535869884904747,0.9700663475002737,0.9806945612268559,0.6256355276966382,0.3966434114578328,0.24895701469681686,0.15370800723532743,0.09227802030782713,0.05265930516857893,0.02710757273638116,0.01062821372658225,5.204170427930421e-17,0.0]]]}}}]]},"code":"// function table_to_csv(source) {\n//     const columns = Object.keys(source.data)\n//     const nrows = source.get_length()\n//     const lines = [columns.join(',')]\n//\n//     for (let i = 0; i &lt; nrows; i++) {\n//         let row = [];\n//         for (let j = 0; j &lt; columns.length; j++) {\n//             const column = columns[j]\n//             row.push(source.data[column][i].toString())\n//         }\n//         lines.push(row.join(','))\n//     }\n//     return lines.join('\\n').concat('\\n')\n// }\n//\n//\n// const filename = 'data_result.csv'\n// const filetext = table_to_csv(source)\n// const blob = new Blob([filetext], { type: 'text/csv;charset=utf-8;' })\n//\n// //addresses IE\n// if (navigator.msSaveBlob) {\n//     navigator.msSaveBlob(blob, filename)\n// } else {\n//     const link = document.createElement('a')\n//     link.href = URL.createObjectURL(blob)\n//     link.download = filename\n//     link.target = '_blank'\n//     link.style.visibility = 'hidden'\n//     link.dispatchEvent(new MouseEvent('click'))\n// }\nfunction table_to_csv(source) {\n    const columns = Object.keys(source.data);\n    const nrows = source.get_length();\n    const lines = [columns.join(',')];\n\n    for (let i = 0; i &lt; nrows; i++) {\n        let row = [];\n        for (let j = 0; j &lt; columns.length; j++) {\n            const column = columns[j];\n            let value = source.data[column][i];\n\n            // Check if the value is numeric; if not, set it as an empty string\n            if (isNaN(value) || value === '') {\n                // value = 'nan';\n                value = '';\n            } else {\n                // value = 'value';\n                // value = parseFloat(value);\n                value = parseFloat(value).toFixed(15);\n            }\n\n            // row.push(value.toString();\n            row.push(value);\n        }\n        lines.push(row.join(','));\n    }\n    return lines.join('\\n').concat('\\n');\n}\n\nconst filename = 'data_result.csv';\nconst filetext = table_to_csv(source);\nconst blob = new Blob([filetext], { type: 'text/csv;charset=utf-8;' });\n\n// Addresses IE\nif (navigator.msSaveBlob) {\n    navigator.msSaveBlob(blob, filename);\n} else {\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = filename;\n    link.target = '_blank';\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.dispatchEvent(new MouseEvent('click'));\n    document.body.removeChild(link);\n}\n"}}]]]},"label":"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"}},{"type":"object","name":"Figure","id":"p1010","attributes":{"height":400,"x_range":{"type":"object","name":"DataRange1d","id":"p1011"},"y_range":{"type":"object","name":"DataRange1d","id":"p1012"},"x_scale":{"type":"object","name":"LinearScale","id":"p1019"},"y_scale":{"type":"object","name":"LinearScale","id":"p1020"},"title":{"type":"object","name":"Title","id":"p1017"},"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1050","attributes":{"data_source":{"id":"p1007"},"view":{"type":"object","name":"CDSView","id":"p1051","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1052"}}},"glyph":{"type":"object","name":"Scatter","id":"p1047","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":{"type":"value","value":"#1f77b4"},"fill_color":{"type":"value","value":"#1f77b4"}}},"nonselection_glyph":{"type":"object","name":"Scatter","id":"p1048","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"muted_glyph":{"type":"object","name":"Scatter","id":"p1049","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"value","value":"#1f77b4"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1018","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1031"},{"type":"object","name":"WheelZoomTool","id":"p1032","attributes":{"renderers":"auto"}},{"type":"object","name":"BoxZoomTool","id":"p1033","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1034","attributes":{"syncable":false,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","handles":{"type":"object","name":"BoxInteractionHandles","id":"p1040","attributes":{"all":{"type":"object","name":"AreaVisuals","id":"p1039","attributes":{"fill_color":"white","hover_fill_color":"lightgray"}}}}}}}},{"type":"object","name":"SaveTool","id":"p1041"},{"type":"object","name":"ResetTool","id":"p1042"},{"type":"object","name":"HelpTool","id":"p1043"}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1026","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1027","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1028"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1029"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1021","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1022","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1023"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1024"}}}],"center":[{"type":"object","name":"Grid","id":"p1025","attributes":{"axis":{"id":"p1021"}}},{"type":"object","name":"Grid","id":"p1030","attributes":{"dimension":1,"axis":{"id":"p1026"}}}]}}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('ce95a1f9-55dd-47c6-8ffc-1ac6da8f813e').textContent;
              const render_items = [{"docid":"41d29aa1-8301-4637-8b12-fe655e21446d","roots":{"p1062":"a361f1b1-0ad7-4d23-b53e-898673f3c122"},"root_ids":["p1062"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>